<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
    <title>Yeet the Baby - Flight School Starts Early</title>
    <style>
        /* ========================================
           GLOBAL STYLES & RESET
           ======================================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Fredoka', 'Comic Sans', sans-serif;
            overflow: hidden;
            background: #E8D5F2;
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Game container wrapper */
        #gameContainer {
            width: 100%;
            height: 100%;
            max-width: 600px;
            max-height: 100vh;
            display: flex;
            flex-direction: column;
            background: #E8D5F2;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        @media (min-width: 768px) {
            #gameContainer {
                max-height: 95vh;
                aspect-ratio: 9 / 16;
                height: auto;
            }
        }

        /* ========================================
           GAME CANVAS & BACKGROUND
           ======================================== */
        #gameArea {
            flex: 1;
            position: relative;
            background: linear-gradient(180deg, #87CEEB 0%, #FFB6C1 100%);
            overflow: hidden;
            border-bottom: 5px solid #333;
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Control area at bottom */
        #controlArea {
            height: 180px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 20px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
        }

        /* Decorative clouds */
        .cloud {
            position: absolute;
            background: white;
            border-radius: 100px;
            opacity: 0.8;
            animation: float 20s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(30px) translateY(-10px); }
        }

        /* ========================================
           UI ELEMENTS
           ======================================== */
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 100;
            color: white;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.5);
            font-size: 24px;
            font-weight: bold;
        }

        #score {
            background: linear-gradient(135deg, #FF6B9D 0%, #C06C84 100%);
            padding: 10px 20px;
            border-radius: 15px;
            border: 4px solid white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        #distance {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            padding: 10px 20px;
            border-radius: 15px;
            border: 4px solid white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.3);
        }

        /* ========================================
           YEET SCALE MECHANIC - IN CONTROL AREA
           ======================================== */
        #yeetScale {
            flex: 1;
            max-width: 600px;
            background: rgba(255,255,255,0.95);
            border: 5px solid #FF1493;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 0 rgba(0,0,0,0.3);
        }

        #yeetBtn {
            background: linear-gradient(135deg, #FF6B9D 0%, #C06C84 100%);
            color: white;
            border: 5px solid white;
            border-radius: 20px;
            padding: 30px 60px;
            font-size: 36px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 0 rgba(0,0,0,0.3);
            transition: all 0.1s;
            font-family: 'Fredoka', sans-serif;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.3);
            margin-left: 20px;
        }

        #yeetBtn:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: 0 12px 0 rgba(0,0,0,0.3);
        }

        #yeetBtn:active:not(:disabled) {
            transform: translateY(4px);
            box-shadow: 0 4px 0 rgba(0,0,0,0.3);
        }

        #yeetBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .scale-title {
            text-align: center;
            font-size: 28px;
            color: #FF1493;
            margin-bottom: 15px;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
        }

        .scale-bar {
            width: 100%;
            height: 40px;
            background: linear-gradient(90deg, #FFB6C1 0%, #FF69B4 50%, #FF1493 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 3px solid #FF1493;
            margin-bottom: 10px;
        }

        .scale-indicator {
            position: absolute;
            top: 0;
            left: 0;
            width: 8px;
            height: 100%;
            background: white;
            box-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px #FF1493;
        }

        .scale-bar-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #FF1493;
            font-weight: bold;
            margin-bottom: 5px;
        }

        #angleBar {
            display: none;
        }

        #angleBar.active {
            display: block;
        }

        .angle-bar {
            width: 100%;
            height: 40px;
            background: linear-gradient(90deg, #4ECDC4 0%, #FFF 50%, #FF6B9D 100%);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 3px solid #4ECDC4;
            margin-bottom: 10px;
        }

        .angle-bar-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #4ECDC4;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .scale-label {
            text-align: center;
            font-size: 16px;
            color: #FF1493;
            font-weight: bold;
        }

        .scale-instruction {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-top: 10px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* ========================================
           MEME CAPTIONS & OVERLAYS
           ======================================== */
        #caption {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: white;
            padding: 30px 50px;
            border: 8px solid #FF1493;
            border-radius: 25px;
            font-size: 48px;
            font-weight: bold;
            color: #FF1493;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.2);
            z-index: 300;
            box-shadow: 0 10px 0 rgba(0,0,0,0.3);
            pointer-events: none;
            white-space: nowrap;
        }

        #caption.show {
            animation: captionPop 2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes captionPop {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-10deg); }
            10% { transform: translate(-50%, -50%) scale(1.2) rotate(5deg); }
            20% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            80% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0) rotate(10deg); opacity: 0; }
        }

        /* ========================================
           CPS OVERLAY (FAIL STATE)
           ======================================== */
        #cpsOverlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,0,0,0.95);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 400;
            animation: sirenFlash 0.5s infinite;
        }

        @keyframes sirenFlash {
            0%, 100% { background: rgba(255,0,0,0.95); }
            50% { background: rgba(200,0,0,0.95); }
        }

        #cpsOverlay.active {
            display: flex;
        }

        .cps-title {
            font-size: 72px;
            color: white;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.5);
            margin-bottom: 20px;
            animation: shake 0.3s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .cps-subtitle {
            font-size: 36px;
            color: white;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
            margin-bottom: 30px;
        }

        .cps-stats {
            background: rgba(255,255,255,0.2);
            padding: 20px 40px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-size: 28px;
            color: white;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
        }

        .cps-stats div {
            margin: 10px 0;
        }

        /* ========================================
           BUTTONS
           ======================================== */
        .btn {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
            border: 4px solid white;
            border-radius: 15px;
            padding: 15px 40px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 6px 0 rgba(0,0,0,0.3);
            transition: all 0.1s;
            font-family: 'Fredoka', sans-serif;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 0 rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.3);
        }

        #restartBtn {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 150;
        }

        /* ========================================
           START SCREEN
           ======================================== */
        #startScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 500;
            padding: 20px;
        }

        .game-title {
    font-size: 72px;
    color: white;
    text-shadow: 6px 6px 0 rgba(0,0,0,0.3);
    margin-bottom: 20px;
    animation: titleBounce 2s infinite;
    white-space: nowrap;
    text-align: center;
    font-family: 'Fredoka', 'Comic Sans', 'sans-serif';
}

        @keyframes titleBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .game-tagline {
            font-size: 24px;
            color: #FFD700;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.3);
            margin-bottom: 40px;
            font-style: italic;
            text-align: center;
            white-space: nowrap;
        }

        #startBtn {
            background: linear-gradient(135deg, #FF6B9D 0%, #C06C84 100%);
            font-size: 32px;
            padding: 20px 50px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .credits {
            position: absolute;
            bottom: 20px;
            color: white;
            font-size: 18px;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.3);
        }

        /* ========================================
           MOBILE RESPONSIVENESS
           ======================================== */
        @media (max-width: 768px) {
            .game-title { 
                font-size: 36px;
                margin-bottom: 15px;
            }
            .game-tagline { 
                font-size: 16px;
                margin-bottom: 30px;
            }
            #startBtn { 
                font-size: 20px;
                padding: 15px 35px;
            }
            
            #controlArea {
                height: 160px;
                flex-direction: column;
                padding: 10px;
            }
            
            #yeetScale { 
                width: 100%;
                max-width: none;
                margin-bottom: 10px;
                padding: 12px;
            }
            
            #yeetBtn {
                margin-left: 0;
                width: 100%;
                padding: 15px 30px;
                font-size: 22px;
            }
            
            .scale-title { font-size: 16px; }
            .scale-bar-labels, .angle-bar-labels { font-size: 10px; }
            .scale-label { font-size: 14px; }
            .scale-instruction { font-size: 12px; }
            #caption { font-size: 20px; padding: 15px 20px; }
            .cps-title { font-size: 32px; }
            .cps-subtitle { font-size: 18px; }
            .cps-stats { font-size: 16px; padding: 12px 20px; }
            #ui { font-size: 14px; }
            #score, #distance { padding: 8px 15px; }
            #restartBtn { font-size: 14px; padding: 8px 18px; }
            #audioToggle { width: 40px; height: 40px; font-size: 18px; right: 80px; }
            .credits { font-size: 14px; }
        }

        @media (min-width: 769px) {
            .game-title { font-size: 72px; }
            .game-tagline { font-size: 24px; }
        }

        /* ========================================
           AUDIO CONTROLS
           ======================================== */
        #audioToggle {
            position: absolute;
            top: 20px;
            right: 100px;
            z-index: 150;
            background: rgba(255,255,255,0.9);
            border: 3px solid #FF1493;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.3);
            transition: all 0.1s;
        }

        #audioToggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 rgba(0,0,0,0.3);
        }

        #audioToggle:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- Game Container (for responsive scaling) -->
    <div id="gameContainer">
        <!-- Start Screen -->
        <div id="startScreen">
            <div class="game-title">üöº YEET THE BABY üöº</div>
            <div class="game-tagline">"Flight School Starts Early"</div>
            <button id="startBtn" class="btn">START YEETING</button>
            <div class="credits">Neon Bread Studios ¬© 2025</div>
        </div>

        <!-- Game Area (top) -->
        <div id="gameArea">
        <!-- Background Clouds -->
        <div class="cloud" style="top: 10%; left: 10%; width: 100px; height: 50px;"></div>
        <div class="cloud" style="top: 20%; left: 70%; width: 120px; height: 60px; animation-delay: -5s;"></div>
        <div class="cloud" style="top: 50%; left: 30%; width: 90px; height: 45px; animation-delay: -10s;"></div>
        <div class="cloud" style="top: 70%; left: 80%; width: 110px; height: 55px; animation-delay: -15s;"></div>

        <!-- Game Canvas -->
        <canvas id="gameCanvas"></canvas>

        <!-- UI Elements -->
        <div id="ui">
            <div id="score">YEET SCORE: <span id="scoreValue">0</span></div>
            <div id="distance">DISTANCE: <span id="distanceValue">0</span>ft</div>
        </div>

        <!-- Audio Toggle -->
        <div id="audioToggle" title="Toggle Music">üîä</div>

        <!-- Restart Button -->
        <button id="restartBtn" class="btn" onclick="resetGame()">YEET AGAIN</button>

        <!-- Meme Caption -->
        <div id="caption"></div>

        <!-- CPS Overlay (Fail State) -->
        <div id="cpsOverlay">
            <div class="cps-title">üö® CPS IS HERE! üö®</div>
            <div class="cps-subtitle">That was NOT a safe landing!</div>
            <div class="cps-stats">
                <div>FINAL SCORE: <span id="cpsScore">0</span></div>
                <div>TOTAL DISTANCE: <span id="cpsDistance">0</span>ft</div>
            </div>
            <button class="btn" onclick="resetGame()">TRY AGAIN (LEGALLY)</button>
        </div>
    </div>

    <!-- Control Area (bottom) -->
    <div id="controlArea">
        <!-- Yeet Scale Mechanic -->
        <div id="yeetScale">
            <div class="scale-title" id="scaleTitle">‚ö° YEET POWER ‚ö°</div>
            
            <!-- Power Bar (Phase 1) -->
            <div id="powerBar">
                <div class="scale-bar-labels">
                    <span>WEAK</span>
                    <span>MEDIUM</span>
                    <span>STRONG</span>
                </div>
                <div class="scale-bar">
                    <div class="scale-indicator" id="powerIndicator"></div>
                </div>
            </div>
            
            <!-- Angle Bar (Phase 2) -->
            <div id="angleBar">
                <div class="angle-bar-labels">
                    <span>‚¨áÔ∏è DOWN</span>
                    <span>‚û°Ô∏è STRAIGHT</span>
                    <span>‚¨ÜÔ∏è UP</span>
                </div>
                <div class="angle-bar">
                    <div class="scale-indicator" id="angleIndicator"></div>
                </div>
            </div>
            
            <div class="scale-label" id="powerLabel">CLICK YEET FOR POWER!</div>
            <div class="scale-instruction">‚¨ÜÔ∏è Time your clicks carefully! ‚¨ÜÔ∏è</div>
        </div>

        <!-- Yeet Button -->
        <button id="yeetBtn" class="btn">YEET!</button>
    </div>
    </div>
    <!-- End Game Container -->

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="retro-8bit-happy-videogame-music-246631.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ========================================
        // GAME STATE & CONFIGURATION
        // ========================================
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        function resizeCanvas() {
            const gameArea = document.getElementById('gameArea');
            canvas.width = gameArea.clientWidth;
            canvas.height = gameArea.clientHeight;
            
            // Update landing zones based on canvas size
            updateLandingZonePositions();
            
            // Update parent position
            parent.y = canvas.height - 150;
            if (baby && !baby.flying) {
                baby.x = parent.x + 40;
                baby.y = parent.y;
            }
        }
        
        function updateLandingZonePositions() {
            // Scale landing zones based on canvas width
            const baseWidth = 1200; // Design width
            const scale = canvas.width / baseWidth;
            const groundY = canvas.height - 120;
            
            // Pool
            landingZones[0].x = 400 * scale;
            landingZones[0].y = groundY - 30;
            landingZones[0].width = 120 * scale;
            landingZones[0].height = 60;
            
            // Crib
            landingZones[1].x = 650 * scale;
            landingZones[1].y = groundY - 30;
            landingZones[1].width = 140 * scale;
            landingZones[1].height = 70;
            
            // Bear
            landingZones[2].x = 950 * scale;
            landingZones[2].y = groundY - 80;
            landingZones[2].width = 150 * scale;
            landingZones[2].height = 120;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Game state
        let gameState = 'start'; // 'start', 'aiming', 'flying', 'landed'
        let score = 0;
        let totalDistance = 0;
        let yeetPhase = 'power'; // 'power' or 'angle'
        let powerValue = 0;
        let angleValue = 0;
        let audioEnabled = true;

        // Parent (thrower) position
        const parent = {
            x: 100,
            y: canvas.height - 150,
            width: 60,
            height: 80
        };

        // Baby physics
        let baby = {
            x: parent.x + 40,
            y: parent.y,
            vx: 0,
            vy: 0,
            rotation: 0,
            rotationSpeed: 0,
            size: 30,
            flying: false
        };

        // Landing zones (targets)
        let landingZones = [
            {
                x: 400,
                y: canvas.height - 150,
                width: 120,
                height: 60,
                type: 'pool',
                name: 'POOL',
                multiplier: 2,
                color: '#4ECDC4',
                hasWalls: true,
                wallThickness: 8
            },
            {
                x: 650,
                y: canvas.height - 150,
                width: 140,
                height: 70,
                type: 'crib',
                name: 'CRIB',
                multiplier: 5,
                color: '#FFB6C1',
                hasWalls: true,
                wallThickness: 6
            },
            {
                x: 950,
                y: canvas.height - 200,
                width: 150,
                height: 120,
                type: 'bear',
                name: 'BEAR',
                multiplier: -1, // Instant fail
                color: '#8B4513',
                hasWalls: false
            }
        ];

        // Random events
        let randomEvent = null;
        let eventDuration = 0;

        // Meme captions for different situations
        const launchCaptions = [
            "CERTIFIED YEET TECHNICIAN! üéØ",
            "PARENTING LEVEL: EXPERT üë∂",
            "SEND IT! üöÄ",
            "WEEEEE! üé¢",
            "NASA CALLED üìû",
            "TO THE MOON! üåô",
            "BIG YEET ENERGY ‚ö°"
        ];

        const landingCaptions = [
            "BUTTER SMOOTH! üßà",
            "10/10 LANDING ‚ú®",
            "STYLE POINTS! üíØ",
            "SAFE AND SOUND üõ°Ô∏è",
            "DIAPER INTACT ‚úÖ",
            "PERFECT FORM üé®",
            "NAILED IT! üéØ"
        ];

        const bonusCaptions = [
            "DIAPER DETONATION BONUS! üí•",
            "HELICOPTER MOM AVOIDED! üöÅ",
            "WIND RESISTANCE MASTERED! üå™Ô∏è",
            "GIGGLE MULTIPLIER! üòÇ",
            "EXTREME DISTANCE! üìè",
            "PHYSICS DEFIED! üî¨"
        ];

        const failCaptions = [
            "YIKES... üò¨",
            "NOT IDEAL... üôà",
            "LEARNING EXPERIENCE! üìö",
            "ROOKIE MISTAKE ü§∑",
            "OOPSIE DAISY üåº"
        ];

        // ========================================
        // AUDIO MANAGEMENT
        // ========================================
        const bgMusic = document.getElementById('bgMusic');
        const audioToggle = document.getElementById('audioToggle');

        audioToggle.addEventListener('click', () => {
            audioEnabled = !audioEnabled;
            if (audioEnabled) {
                bgMusic.play().catch(e => {
                    console.log('Audio playback prevented:', e);
                    audioEnabled = false;
                    audioToggle.textContent = 'üîá';
                });
                audioToggle.textContent = 'üîä';
            } else {
                bgMusic.pause();
                audioToggle.textContent = 'üîá';
            }
        });

        // ========================================
        // ========================================
// START GAME
// ========================================
window.addEventListener('DOMContentLoaded', () => {
    const startBtn = document.getElementById('startBtn');
    if (startBtn) {
        startBtn.addEventListener('click', () => {
            document.getElementById('startScreen').style.display = 'none';
            gameState = 'ready';
            if (audioEnabled) {
                bgMusic.play().catch(e => console.log('Audio autoplay prevented'));
            }
            animatePowerIndicator();
            gameLoop();
        });
    }
});

        // ========================================
        // YEET SCALE MECHANIC
        // ========================================
        let scaleAnimationId = null;
        let powerIndicatorPosition = 0;
        let angleIndicatorPosition = 0;
        let indicatorDirection = 1;

        function animatePowerIndicator() {
            const indicator = document.getElementById('powerIndicator');
            
            function animate() {
                powerIndicatorPosition += indicatorDirection * 2;
                
                if (powerIndicatorPosition >= 100) {
                    powerIndicatorPosition = 100;
                    indicatorDirection = -1;
                } else if (powerIndicatorPosition <= 0) {
                    powerIndicatorPosition = 0;
                    indicatorDirection = 1;
                }
                
                indicator.style.left = powerIndicatorPosition + '%';
                scaleAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }

        function animateAngleIndicator() {
            const indicator = document.getElementById('angleIndicator');
            indicatorDirection = 1;
            angleIndicatorPosition = 0;
            
            function animate() {
                angleIndicatorPosition += indicatorDirection * 2;
                
                if (angleIndicatorPosition >= 100) {
                    angleIndicatorPosition = 100;
                    indicatorDirection = -1;
                } else if (angleIndicatorPosition <= 0) {
                    angleIndicatorPosition = 0;
                    indicatorDirection = 1;
                }
                
                indicator.style.left = angleIndicatorPosition + '%';
                scaleAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }

        // Button click handler - ONE CLICK PER PHASE
        document.getElementById('yeetBtn').addEventListener('click', () => {
            if (gameState === 'ready') {
                // First click - lock power immediately and move to angle
                powerValue = powerIndicatorPosition;
                cancelAnimationFrame(scaleAnimationId);
                
                // Hide power bar, show angle bar
                document.getElementById('powerBar').style.display = 'none';
                document.getElementById('angleBar').classList.add('active');
                
                // Update UI
                yeetPhase = 'angle';
                gameState = 'aiming';
                document.getElementById('scaleTitle').textContent = 'üìê YEET ANGLE üìê';
                document.getElementById('powerLabel').textContent = 'CLICK YEET FOR ANGLE!';
                
                // Start angle animation
                animateAngleIndicator();
                
            } else if (gameState === 'aiming') {
                // Second click - lock angle and launch
                angleValue = angleIndicatorPosition;
                cancelAnimationFrame(scaleAnimationId);
                launchBaby();
            }
        });

        // ========================================
        // BABY PHYSICS & LAUNCHING
        // ========================================
        function launchBaby() {
            // Power: 0-100 becomes velocity 8-28 (increased range for better gameplay)
            const velocity = (powerValue / 100) * 20 + 8;
            
            // Angle: 0 = up (90¬∞), 50 = straight (0¬∞), 100 = down (-90¬∞)
            // We need to invert Y because canvas Y goes down, but we want "up" to mean up
            let angleDegrees;
            if (angleValue < 50) {
                // Left side of bar = UP (positive angle)
                angleDegrees = 90 - (angleValue * 1.8); // 90¬∞ to 0¬∞
            } else {
                // Right side of bar = DOWN (negative angle)
                angleDegrees = -(angleValue - 50) * 1.8; // 0¬∞ to -90¬∞
            }
            
            const angleRadians = angleDegrees * (Math.PI / 180);
            
            // Calculate velocity components (note: negative vy because canvas Y is inverted)
            baby.vx = Math.cos(angleRadians) * velocity;
            baby.vy = -Math.sin(angleRadians) * velocity; // Negative because canvas Y goes down
            
            baby.flying = true;
            baby.rotationSpeed = (Math.random() - 0.5) * 0.3;
            
            gameState = 'flying';
            
            // Random event chance (30%)
            if (Math.random() < 0.3) {
                triggerRandomEvent();
            }
        }

        function updateBabyPhysics() {
            if (!baby.flying) return;
            
            // Apply gravity
            baby.vy += 0.5;
            
            // Apply random event effects
            if (randomEvent) {
                if (randomEvent.type === 'wind') {
                    baby.vx += randomEvent.force;
                }
            }
            
            // Update position
            baby.x += baby.vx;
            baby.y += baby.vy;
            baby.rotation += baby.rotationSpeed;
            
            // Check collision with landing zone walls (pool and crib have solid walls)
            for (let zone of landingZones) {
                if (zone.hasWalls) {
                    const babyRadius = baby.size / 2;
                    
                    // Check if baby is within the zone's vertical range
                    if (baby.y + babyRadius >= zone.y && baby.y - babyRadius <= zone.y + zone.height) {
                        // Check left wall collision
                        if (baby.x + babyRadius >= zone.x && baby.x - babyRadius < zone.x && baby.vx > 0) {
                            baby.x = zone.x - babyRadius;
                            baby.vx = -baby.vx * 0.6; // Bounce with energy loss
                            baby.rotationSpeed *= -1;
                        }
                        
                        // Check right wall collision
                        if (baby.x - babyRadius <= zone.x + zone.width && baby.x + babyRadius > zone.x + zone.width && baby.vx < 0) {
                            baby.x = zone.x + zone.width + babyRadius;
                            baby.vx = -baby.vx * 0.6; // Bounce with energy loss
                            baby.rotationSpeed *= -1;
                        }
                    }
                    
                    // Check if baby is within horizontal range
                    if (baby.x >= zone.x && baby.x <= zone.x + zone.width) {
                        // Check top wall/edge collision (back wall)
                        if (baby.y + babyRadius >= zone.y && baby.y - babyRadius < zone.y && baby.vy > 0) {
                            baby.y = zone.y - babyRadius;
                            baby.vy = -baby.vy * 0.5; // Bounce off back wall
                            baby.rotationSpeed *= -1;
                        }
                    }
                }
            }
            
            // Check for landing on ground
            if (baby.y >= canvas.height - 120) {
                checkLanding();
            }
            
            // Check if baby went off screen (fail)
            if (baby.x < 0 || baby.x > canvas.width || baby.y > canvas.height) {
                triggerCPS();
            }
        }

        // ========================================
        // RANDOM EVENTS (CHAOS FACTOR)
        // ========================================
        function triggerRandomEvent() {
            const events = [
                { type: 'wind', name: 'GUSTY WIND', force: (Math.random() - 0.5) * 0.5, emoji: 'üå™Ô∏è' },
                { type: 'helicopter', name: 'HELICOPTER MOM', force: 0, emoji: 'üöÅ' },
                { type: 'explosion', name: 'DIAPER DETONATION', force: 0, emoji: 'üí•' }
            ];
            
            randomEvent = events[Math.floor(Math.random() * events.length)];
            eventDuration = 120; // frames
            
            // Event will be drawn on screen, no caption needed
        }

        // ========================================
        // LANDING DETECTION & SCORING
        // ========================================
        function checkLanding() {
            baby.flying = false;
            baby.vy = 0;
            baby.vx = 0;
            let landed = false;
            let landedZone = null;
            
            // Check if landed in a safe zone or bear (baby center must be inside the zone)
            for (let zone of landingZones) {
                // Check if baby's center point is within the zone boundaries
                if (baby.x >= zone.x + 10 && baby.x <= zone.x + zone.width - 10 &&
                    baby.y >= zone.y && baby.y <= zone.y + zone.height) {
                    landed = true;
                    landedZone = zone;
                    break;
                }
            }
            
            if (landed && landedZone) {
                if (landedZone.type === 'bear') {
                    // Baby eaten by bear - instant fail
                    showCaption('üêª BABY WAS EATEN! üêª');
                    setTimeout(() => {
                        triggerCPS();
                    }, 2000);
                } else {
                    // GOOD LANDING - show success caption
                    showCaption(landingCaptions[Math.floor(Math.random() * landingCaptions.length)]);
                    
                    // Calculate score
                    const distance = Math.floor(baby.x - parent.x - 40);
                    const baseScore = distance * landedZone.multiplier;
                    let bonusScore = 0;
                    
                    // Style bonus (based on rotation)
                    const styleBonus = Math.floor(Math.abs(baby.rotation) * 10);
                    bonusScore += styleBonus;
                    
                    // Random event bonus
                    if (randomEvent) {
                        bonusScore += 500;
                    }
                    
                    const finalScore = baseScore + bonusScore;
                    score += finalScore;
                    totalDistance += distance;
                    
                    updateScoreDisplay();
                    
                    setTimeout(() => {
                        resetForNextThrow();
                    }, 2000);
                }
            } else {
                // Bad landing (ground) - trigger CPS with fail caption
                showCaption(failCaptions[Math.floor(Math.random() * failCaptions.length)]);
                setTimeout(() => {
                    triggerCPS();
                }, 1500);
            }
        }

        // ========================================
        // CPS FAIL STATE
        // ========================================
        function triggerCPS() {
            gameState = 'cps';
            document.getElementById('cpsScore').textContent = score;
            document.getElementById('cpsDistance').textContent = totalDistance;
            document.getElementById('cpsOverlay').classList.add('active');
        }

        // ========================================
        // CAPTION SYSTEM
        // ========================================
        function showCaption(text) {
            const caption = document.getElementById('caption');
            caption.textContent = text;
            caption.classList.remove('show');
            
            // Force reflow
            void caption.offsetWidth;
            
            caption.classList.add('show');
        }

        // ========================================
        // SCORE & UI UPDATES
        // ========================================
        function updateScoreDisplay() {
            document.getElementById('scoreValue').textContent = score;
            document.getElementById('distanceValue').textContent = totalDistance;
        }

        // ========================================
        // RESET FUNCTIONS
        // ========================================
        function resetForNextThrow() {
            baby.x = parent.x + 40;
            baby.y = parent.y;
            baby.vx = 0;
            baby.vy = 0;
            baby.rotation = 0;
            baby.flying = false;
            randomEvent = null;
            gameState = 'ready';
            yeetPhase = 'power';
            
            // Reset UI
            document.getElementById('powerLabel').textContent = 'CLICK YEET FOR POWER!';
            document.getElementById('scaleTitle').textContent = '‚ö° YEET POWER ‚ö°';
            document.getElementById('powerBar').style.display = 'block';
            document.getElementById('angleBar').classList.remove('active');
            
            powerIndicatorPosition = 0;
            angleIndicatorPosition = 0;
            indicatorDirection = 1;
            
            animatePowerIndicator();
        }

        function resetGame() {
            document.getElementById('cpsOverlay').classList.remove('active');
            score = 0;
            totalDistance = 0;
            updateScoreDisplay();
            resetForNextThrow();
        }

        // ========================================
        // RENDERING
        // ========================================
        function drawParent() {
            ctx.save();
            ctx.translate(parent.x, parent.y);
            
            // Legs
            ctx.fillStyle = '#4169E1'; // Blue pants
            ctx.fillRect(10, 60, 15, 40); // Left leg
            ctx.fillRect(35, 60, 15, 40); // Right leg
            
            // Shoes
            ctx.fillStyle = '#000';
            ctx.fillRect(8, 95, 20, 8); // Left shoe
            ctx.fillRect(33, 95, 20, 8); // Right shoe
            
            // Body/Torso
            ctx.fillStyle = '#FF6B9D'; // Pink shirt
            ctx.fillRect(5, 20, 50, 45);
            
            // Arms
            ctx.fillStyle = '#FFD4A3'; // Skin tone
            
            // Left arm (down)
            ctx.fillRect(0, 25, 10, 35);
            // Left hand
            ctx.beginPath();
            ctx.arc(5, 62, 6, 0, Math.PI * 2);
            ctx.fill();
            
            // Right arm (throwing position - up and extended)
            ctx.save();
            ctx.translate(55, 25);
            if (gameState === 'ready' || gameState === 'aiming') {
                ctx.rotate(-45 * Math.PI / 180); // Arm raised
            }
            ctx.fillRect(0, 0, 10, 35);
            // Right hand
            ctx.beginPath();
            ctx.arc(5, 37, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            // Neck
            ctx.fillStyle = '#FFD4A3';
            ctx.fillRect(22, 10, 16, 12);
            
            // Head
            ctx.fillStyle = '#FFD4A3';
            ctx.beginPath();
            ctx.arc(30, 5, 18, 0, Math.PI * 2);
            ctx.fill();
            
            // Hair
            ctx.fillStyle = '#8B4513'; // Brown hair
            ctx.beginPath();
            ctx.arc(30, 0, 18, Math.PI, 0, true);
            ctx.fill();
            
            // Hair details (spiky)
            for (let i = 0; i < 5; i++) {
                ctx.beginPath();
                const angle = Math.PI + (i * Math.PI / 4);
                const x = 30 + Math.cos(angle) * 18;
                const y = 0 + Math.sin(angle) * 18;
                ctx.moveTo(x, y);
                ctx.lineTo(x + Math.cos(angle) * 8, y + Math.sin(angle) * 8);
                ctx.lineWidth = 4;
                ctx.stroke();
            }
            
            // Eyes
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.arc(23, 3, 3, 0, Math.PI * 2); // Left eye
            ctx.arc(37, 3, 3, 0, Math.PI * 2); // Right eye
            ctx.fill();
            
            // Determined smile/mouth
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(30, 10, 8, 0.2, Math.PI - 0.2);
            ctx.stroke();
            
            // Eyebrows (determined look)
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(18, -2);
            ctx.lineTo(28, 0);
            ctx.moveTo(42, -2);
            ctx.lineTo(32, 0);
            ctx.stroke();
            
            ctx.restore();
        }

        function drawBaby() {
            ctx.save();
            ctx.translate(baby.x, baby.y);
            ctx.rotate(baby.rotation);
            
            // Baby body (onesie)
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(-baby.size/2, -baby.size/2, baby.size, baby.size);
            
            // Head
            ctx.fillStyle = '#FFE4C4';
            ctx.beginPath();
            ctx.arc(0, -baby.size/3, baby.size/3, 0, Math.PI * 2);
            ctx.fill();
            
            // Eyes (excited)
            ctx.fillStyle = '#000';
            ctx.beginPath();
            ctx.arc(-5, -baby.size/3, 2, 0, Math.PI * 2);
            ctx.arc(5, -baby.size/3, 2, 0, Math.PI * 2);
            ctx.fill();
            
            // Happy mouth
            if (baby.flying) {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.arc(0, -baby.size/3 + 5, 5, 0, Math.PI);
                ctx.stroke();
            }
            
            // Diaper
            ctx.fillStyle = '#FFF';
            ctx.fillRect(-baby.size/2, baby.size/4, baby.size, baby.size/4);
            
            ctx.restore();
        }

        function drawLandingZones() {
            landingZones.forEach(zone => {
                ctx.save();
                ctx.translate(zone.x, zone.y);
                
                if (zone.type === 'pool') {
                    // Swimming pool with solid walls
                    
                    // Water (inside)
                    ctx.fillStyle = '#4ECDC4';
                    ctx.fillRect(zone.wallThickness, zone.wallThickness, 
                               zone.width - (zone.wallThickness * 2), 
                               zone.height - zone.wallThickness);
                    
                    // Pool walls (solid concrete)
                    ctx.fillStyle = '#2C3E50';
                    
                    // Left wall
                    ctx.fillRect(0, 0, zone.wallThickness, zone.height);
                    
                    // Right wall  
                    ctx.fillRect(zone.width - zone.wallThickness, 0, zone.wallThickness, zone.height);
                    
                    // Back wall (top)
                    ctx.fillRect(0, 0, zone.width, zone.wallThickness);
                    
                    // Front edge (lip)
                    ctx.fillRect(0, zone.height - 4, zone.width, 4);
                    
                    // Water ripples
                    ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                    ctx.lineWidth = 2;
                    for (let i = 0; i < 3; i++) {
                        ctx.beginPath();
                        ctx.arc(30 + i * 30, 30, 15 + i * 5, 0, Math.PI);
                        ctx.stroke();
                    }
                    
                    // Label
                    ctx.font = 'bold 16px Fredoka';
                    ctx.fillStyle = '#FFF';
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 3;
                    ctx.textAlign = 'center';
                    ctx.strokeText('POOL', zone.width/2, -10);
                    ctx.fillText('POOL', zone.width/2, -10);
                    ctx.strokeText('x' + zone.multiplier, zone.width/2, zone.height + 20);
                    ctx.fillText('x' + zone.multiplier, zone.width/2, zone.height + 20);
                    
                } else if (zone.type === 'crib') {
                    // Baby crib with solid rails
                    
                    // Mattress (pink)
                    ctx.fillStyle = '#FFB6C1';
                    ctx.fillRect(10, 20, zone.width - 20, zone.height - 20);
                    
                    // Solid wooden frame
                    ctx.fillStyle = '#8B7355';
                    
                    // Left rail (solid)
                    ctx.fillRect(0, 0, zone.wallThickness, zone.height);
                    
                    // Right rail (solid)
                    ctx.fillRect(zone.width - zone.wallThickness, 0, zone.wallThickness, zone.height);
                    
                    // Back rail (solid)
                    ctx.fillRect(0, 0, zone.width, zone.wallThickness);
                    
                    // Bottom frame
                    ctx.fillRect(0, zone.height - 6, zone.width, 6);
                    
                    // Decorative bars on sides (not solid, just visual)
                    ctx.strokeStyle = '#FFF';
                    ctx.lineWidth = 3;
                    for (let i = 1; i < 7; i++) {
                        const x = 15 + i * 18;
                        ctx.beginPath();
                        ctx.moveTo(x, 8);
                        ctx.lineTo(x, 60);
                        ctx.stroke();
                    }
                    
                    // Pillow
                    ctx.fillStyle = '#FFF';
                    ctx.beginPath();
                    ctx.ellipse(zone.width/2, 35, 25, 15, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Label
                    ctx.font = 'bold 16px Fredoka';
                    ctx.fillStyle = '#FFF';
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 3;
                    ctx.textAlign = 'center';
                    ctx.strokeText('CRIB', zone.width/2, -10);
                    ctx.fillText('CRIB', zone.width/2, -10);
                    ctx.strokeText('x' + zone.multiplier, zone.width/2, zone.height + 20);
                    ctx.fillText('x' + zone.multiplier, zone.width/2, zone.height + 20);
                    
                } else if (zone.type === 'bear') {
                    // Hungry bear
                    ctx.fillStyle = '#8B4513'; // Brown bear
                    
                    // Body
                    ctx.beginPath();
                    ctx.ellipse(zone.width/2, zone.height - 30, 50, 60, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Head
                    ctx.beginPath();
                    ctx.arc(zone.width/2, 30, 40, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Ears
                    ctx.beginPath();
                    ctx.arc(zone.width/2 - 30, 10, 15, 0, Math.PI * 2);
                    ctx.arc(zone.width/2 + 30, 10, 15, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Snout
                    ctx.fillStyle = '#D2691E';
                    ctx.beginPath();
                    ctx.ellipse(zone.width/2, 40, 20, 15, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Eyes (mean look)
                    ctx.fillStyle = '#000';
                    ctx.beginPath();
                    ctx.arc(zone.width/2 - 15, 20, 5, 0, Math.PI * 2);
                    ctx.arc(zone.width/2 + 15, 20, 5, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Open mouth (scary)
                    ctx.fillStyle = '#000';
                    ctx.beginPath();
                    ctx.ellipse(zone.width/2, 45, 15, 12, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Teeth
                    ctx.fillStyle = '#FFF';
                    for (let i = 0; i < 5; i++) {
                        ctx.beginPath();
                        ctx.moveTo(zone.width/2 - 12 + i * 6, 40);
                        ctx.lineTo(zone.width/2 - 12 + i * 6, 48);
                        ctx.lineTo(zone.width/2 - 9 + i * 6, 44);
                        ctx.fill();
                    }
                    
                    // Arms reaching
                    ctx.fillStyle = '#8B4513';
                    ctx.beginPath();
                    ctx.ellipse(zone.width/2 - 50, zone.height - 40, 15, 30, -30 * Math.PI / 180, 0, Math.PI * 2);
                    ctx.ellipse(zone.width/2 + 50, zone.height - 40, 15, 30, 30 * Math.PI / 180, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Claws
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    for (let i = 0; i < 3; i++) {
                        ctx.beginPath();
                        ctx.moveTo(zone.width/2 - 60 + i * 5, zone.height - 50);
                        ctx.lineTo(zone.width/2 - 65 + i * 5, zone.height - 60);
                        ctx.stroke();
                        
                        ctx.beginPath();
                        ctx.moveTo(zone.width/2 + 60 - i * 5, zone.height - 50);
                        ctx.lineTo(zone.width/2 + 65 - i * 5, zone.height - 60);
                        ctx.stroke();
                    }
                    
                    // Label (warning!)
                    ctx.font = 'bold 16px Fredoka';
                    ctx.fillStyle = '#FF0000';
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 3;
                    ctx.textAlign = 'center';
                    ctx.strokeText('üö® BEAR üö®', zone.width/2, -10);
                    ctx.fillText('üö® BEAR üö®', zone.width/2, -10);
                }
                
                ctx.restore();
            });
        }

        function drawGround() {
            // Grass
            ctx.fillStyle = '#90EE90';
            ctx.fillRect(0, canvas.height - 100, canvas.width, 100);
            
            // Grass details
            ctx.strokeStyle = '#228B22';
            ctx.lineWidth = 2;
            for (let i = 0; i < canvas.width; i += 20) {
                ctx.beginPath();
                ctx.moveTo(i, canvas.height - 100);
                ctx.lineTo(i + 5, canvas.height - 110);
                ctx.stroke();
            }
        }

        function drawRandomEvent() {
            if (!randomEvent || eventDuration <= 0) return;
            
            eventDuration--;
            
            // Draw event indicator
            ctx.font = 'bold 24px Fredoka';
            ctx.textAlign = 'center';
            ctx.fillStyle = '#FFF';
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 4;
            const text = randomEvent.emoji + ' ' + randomEvent.name + ' ' + randomEvent.emoji;
            ctx.strokeText(text, canvas.width / 2, 100);
            ctx.fillText(text, canvas.width / 2, 100);
            
            // Visual effects
            if (randomEvent.type === 'wind') {
                // Wind lines
                for (let i = 0; i < 10; i++) {
                    ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    const y = 150 + i * 50;
                    const offset = (Date.now() / 10 + i * 20) % canvas.width;
                    ctx.moveTo(offset, y);
                    ctx.lineTo(offset + 30, y);
                    ctx.stroke();
                }
            } else if (randomEvent.type === 'helicopter') {
                // Helicopter
                const heliX = canvas.width / 2 + Math.sin(Date.now() / 500) * 100;
                const heliY = 150;
                ctx.fillStyle = '#FF0000';
                ctx.fillRect(heliX - 30, heliY, 60, 20);
                ctx.fillRect(heliX - 5, heliY - 15, 10, 15);
                
                // Rotor
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(heliX - 40, heliY - 15);
                ctx.lineTo(heliX + 40, heliY - 15);
                ctx.stroke();
            }
        }

        function drawTrajectoryPreview() {
            // Removed - no preview line needed
        }

        // ========================================
        // MAIN GAME LOOP
        // ========================================
        function gameLoop() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw game elements
            drawGround();
            drawLandingZones();
            drawParent();
            drawBaby();
            drawTrajectoryPreview();
            drawRandomEvent();
            
            // Update physics
            if (gameState === 'flying') {
                updateBabyPhysics();
            }
            
            // Continue loop
            requestAnimationFrame(gameLoop);
        }

        // ========================================
        // INITIALIZE
        // ========================================
        // Game starts when player clicks the start button
    </script>
</body>
</html>
